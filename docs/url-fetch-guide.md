# URL 导入功能使用指南

## 📋 功能说明

URL 导入功能允许您直接从网页链接导入文章内容,自动提取标题和正文。系统会模拟真实浏览器访问,提高抓取成功率。

## ✅ 支持的网站类型

### 完全支持 (已优化)

以下网站已针对性优化,抓取成功率高:

| 网站 | 域名 | 支持度 | 说明 |
|------|------|--------|------|
| 知乎 | zhihu.com | ⭐⭐⭐⭐ | 支持文章、专栏 |
| CSDN | csdn.net | ⭐⭐⭐⭐⭐ | 技术博客 |
| 简书 | jianshu.com | ⭐⭐⭐⭐⭐ | 个人创作 |
| 掘金 | juejin.cn | ⭐⭐⭐⭐⭐ | 技术社区 |
| SegmentFault | segmentfault.com | ⭐⭐⭐⭐⭐ | 技术问答 |
| 博客园 | cnblogs.com | ⭐⭐⭐⭐⭐ | 技术博客 |

### 通用支持

大多数标准的新闻、博客网站都可以抓取,包括:
- 个人博客 (WordPress, Hexo, Hugo 等)
- 新闻网站
- 技术文档
- 在线文章

## ⚠️ 限制说明

### 无法抓取的情况

❌ **需要登录的内容**
- 会员专享文章
- 需要登录才能查看的内容
- 私密文章

❌ **严格反爬虫保护**
- 使用 Cloudflare 等严格保护的网站
- 动态加载内容(需要 JavaScript 执行)
- 验证码保护的页面

❌ **特殊格式**
- PDF 文件链接 (请下载后上传)
- 视频内容
- 纯图片内容

### 常见错误及解决方案

#### 1. HTTP 403 错误
**原因:** 网站检测到自动化访问

**解决方案:**
1. **方案 A - 复制粘贴** (推荐)
   - 在浏览器中打开文章
   - 复制全文内容
   - 使用"文本输入"模式粘贴

2. **方案 B - 截图/下载**
   - 将网页保存为 PDF
   - 使用"文件上传"功能

3. **方案 C - 稍后重试**
   - 等待 1-2 分钟后重试
   - 系统会自动使用不同的请求头

#### 2. HTTP 429 错误
**原因:** 请求过于频繁

**解决方案:**
- 等待 1-2 分钟后重试
- 避免短时间内频繁抓取同一网站

#### 3. 内容提取失败
**原因:** 网页结构特殊或内容过少

**解决方案:**
- 确认 URL 是文章页面而非列表页
- 使用复制粘贴方式
- 检查文章是否需要登录

## 💡 最佳实践

### 推荐使用场景

✅ **公开的技术博客**
- 优先使用 URL 导入
- 自动提取标题和内容
- 格式整理自动完成

✅ **新闻文章**
- 适合批量导入
- 提高效率

✅ **文档资料**
- 在线文档
- 帮助中心文章

### 不推荐场景

⚠️ **需要登录的内容** → 使用复制粘贴
⚠️ **会员专享文章** → 使用复制粘贴或下载
⚠️ **格式复杂的文章** → 使用文件上传

## 🔧 技术细节

### 抓取机制

系统会:
1. ✅ 模拟真实浏览器访问 (随机 User-Agent)
2. ✅ 添加完整的浏览器请求头
3. ✅ 自动重试 (最多3次)
4. ✅ 递增延迟避免频繁请求
5. ✅ 智能识别网站类型
6. ✅ 针对性提取内容

### 请求头配置

系统会发送以下请求头:
```
User-Agent: (随机选择真实浏览器)
Accept: text/html,application/xhtml+xml...
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
Referer: (目标网站首页)
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
...
```

### 重试策略

- 首次失败: 等待 1 秒后重试
- 二次失败: 等待 2 秒后重试
- 三次失败: 返回错误提示

## 📝 使用步骤

### 标准流程

1. **进入创建文章页面**
   - 点击"创建新文章"

2. **选择"网址导入"**
   - 点击"网址导入"标签

3. **粘贴 URL**
   - 粘贴完整的文章链接
   - 例: `https://zhuanlan.zhihu.com/p/123456789`

4. **等待提取**
   - 系统自动抓取内容
   - 自动填充标题和内容

5. **确认并创建**
   - 检查提取的内容
   - 可手动修改标题
   - 点击"创建文章并生成问答"

### 失败后的备选方案

如果 URL 导入失败:

**选项 1: 文本粘贴**
```
1. 在浏览器打开文章
2. 全选并复制内容 (Ctrl+A, Ctrl+C)
3. 切换到"文本输入"模式
4. 粘贴内容 (Ctrl+V)
```

**选项 2: 文件上传**
```
1. 将网页另存为 PDF
2. 切换到"文件上传"模式
3. 上传 PDF 文件
```

## 🎯 使用技巧

### 提高成功率

1. **使用文章直链**
   ✅ `https://example.com/article/123`
   ❌ `https://example.com/category/tech`

2. **避免频繁请求**
   - 同一网站间隔 10 秒以上

3. **选择公开内容**
   - 优先选择无需登录的文章

4. **检查 URL 有效性**
   - 确保链接在浏览器中可以正常打开

### 网站特定技巧

#### 知乎
- ✅ 专栏文章: `zhuanlan.zhihu.com/p/xxxxx`
- ✅ 回答: `zhihu.com/question/xxx/answer/xxx`
- ⚠️ 部分内容可能需要登录

#### CSDN
- ✅ 博客文章: `blog.csdn.net/xxx/article/details/xxx`
- ✅ 成功率高

#### 简书
- ✅ 文章: `jianshu.com/p/xxxxx`
- ✅ 抓取效果好

## 🐛 常见问题

**Q: 为什么有的网站无法抓取?**
A: 部分网站有严格的反爬虫保护,建议使用复制粘贴方式。

**Q: 抓取的内容不完整怎么办?**
A: 可能是网站使用了动态加载,建议手动复制粘贴。

**Q: 可以抓取需要登录的内容吗?**
A: 不可以。系统无法处理需要认证的内容,请登录后复制粘贴。

**Q: 如何知道某个网站是否支持?**
A: 直接尝试即可,失败后会有明确的错误提示。

**Q: 抓取速度慢怎么办?**
A: 
- 网络问题: 检查网络连接
- 网站响应慢: 等待或换时间段
- 使用复制粘贴更快

## 📊 统计数据

### 成功率参考

| 网站类型 | 成功率 | 说明 |
|---------|--------|------|
| 技术博客 | 90%+ | CSDN, 掘金, 简书等 |
| 个人博客 | 85%+ | WordPress 等 |
| 新闻网站 | 70%+ | 依赖具体网站 |
| 社交平台 | 50%+ | 如知乎,部分需登录 |
| 文档网站 | 95%+ | GitBook, ReadTheDocs 等 |

### 平均处理时间

- 成功抓取: 2-5 秒
- 重试情况: 5-10 秒
- 失败返回: 10-15 秒

## 🔄 版本更新

### v1.1 (当前版本)
- ✅ 添加多种 User-Agent 随机选择
- ✅ 完善请求头模拟真实浏览器
- ✅ 实现自动重试机制 (3次)
- ✅ 针对知乎、CSDN 等网站优化
- ✅ 改进错误提示信息

### 计划中的改进
- [ ] 支持更多网站特定优化
- [ ] 添加代理支持
- [ ] 提供爬取预览功能
- [ ] 支持批量 URL 导入

---

**使用建议**: 优先尝试 URL 导入,失败后使用复制粘贴作为备选方案。
